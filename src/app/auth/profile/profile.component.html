<div fxLayoutAlign="space-between">
    <button mat-icon-button (click)="isEditingToggle()">
        <mat-icon *ngIf="this.profileForInput.id === this.userService.currentUser.id">edit</mat-icon> 
    </button>
    <button mat-button [mat-dialog-close]="true">
        <mat-icon>close</mat-icon>
    </button>
</div>
<mat-dialog-content>
    <form fxLayout="column"
          fxLayoutGap="2vh"
          #editForm="ngForm"
          (ngSubmit)="finishEditing(editForm)">
        
        <!-- Email -->

        <mat-card>
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1vw">
                <mat-icon>mail</mat-icon>
                <div>
                    <mat-card-subtitle>Email</mat-card-subtitle>
                    <span *ngIf="!this.isEditing"> {{this.profileForInput.email}} </span>
                </div>
                <mat-form-field *ngIf="this.isEditing">
                    <input matInput
                            placeholder="email"
                            type="email"
                            ngModel
                            name="email"
                            [(ngModel)]="this.profileForInput.email"
                            email
                            required
                            #emailInput="ngModel">
                    <mat-error *ngIf="emailInput.hasError('required')">Email is required</mat-error>
                    <mat-error *ngIf="!emailInput.hasError('required')">Wrong Email format</mat-error>
                </mat-form-field>
            </div>
        </mat-card>

        <!-- Password -->

        <mat-card *ngIf="this.isEditing">
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1vw">
                <mat-icon>lock</mat-icon>
                <div>
                    <mat-card-subtitle>Password</mat-card-subtitle>
                </div>
                <mat-form-field *ngIf="this.isEditing">
                    <input matInput
                            placeholder="Password"
                            type="password"
                            ngModel
                            name="password"
                            [(ngModel)]="this.profileForInput.password"
                            required
                            #passwordInput="ngModel">
                    <mat-error *ngIf="passwordInput.hasError('required')">Password is required</mat-error>
                </mat-form-field>
            </div>
        </mat-card>

        <!-- Name -->

        <mat-card>
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1vw">
                <mat-icon>account_circle</mat-icon>
                <div>
                    <mat-card-subtitle>Name</mat-card-subtitle>
                    <span *ngIf="!this.isEditing"> {{this.profileForInput.name}} </span>
                </div>
                <mat-form-field *ngIf="this.isEditing">
                    <input matInput
                            placeholder="Name"
                            type="name"
                            ngModel
                            name="name"
                            [(ngModel)]="this.profileForInput.name"
                            required
                            #nameInput="ngModel">
                    <mat-error *ngIf="nameInput.hasError('required')">Name is required</mat-error>
                </mat-form-field>
            </div>
        </mat-card>

        <!-- Phone -->

        <mat-card>
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1vw">
                <mat-icon>contact_phone</mat-icon>
                <div>
                    <mat-card-subtitle>Phone</mat-card-subtitle>
                    <span *ngIf="!this.isEditing"> {{this.profileForInput.phone}} </span>
                </div>
                <mat-form-field *ngIf="this.isEditing">
                    <input matInput
                            placeholder="Phone"
                            type="phone"
                            ngModel
                            name="phone"
                            [(ngModel)]="this.profileForInput.phone"
                            required
                            #nameInput="ngModel">
                    <mat-error *ngIf="nameInput.hasError('required')">Phone is required</mat-error>
                </mat-form-field>
            </div>
        </mat-card>        

        <button *ngIf="this.isEditing" mat-raised-button type="submit" color="primary" [disabled]="editForm.invalid">Save user</button>

    </form>
</mat-dialog-content>